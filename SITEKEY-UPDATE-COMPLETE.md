# âœ… Turnstile ç«™ç‚¹å¯†é’¥æ›´æ–°å®Œæˆ

## æ›´æ–°æ—¶é—´
**2025-10-21**

## æ›´æ–°å†…å®¹

### æ—§ç«™ç‚¹å¯†é’¥
```
0x4AAAAAAAzX8PJx0lF_CDHO
```

### æ–°ç«™ç‚¹å¯†é’¥
```
0x4AAAAAAACxIrRaibzD1pfM
```

---

## ğŸ“ æ›´æ–°æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | æ›´æ–°ä½ç½® | çŠ¶æ€ |
|------|---------|------|
| `src/user-pages.js` | ç¬¬ 381 è¡Œï¼ˆæ¸²æŸ“å‡½æ•°ï¼‰ | âœ… å·²æ›´æ–° |
| `TURNSTILE-KEYS-CN.md` | ç¤ºä¾‹ä»£ç ï¼ˆ6å¤„ï¼‰ | âœ… å·²æ›´æ–° |
| `TURNSTILE-FIX-CN.md` | æ–‡æ¡£ç¤ºä¾‹ï¼ˆ2å¤„ï¼‰ | âœ… å·²æ›´æ–° |
| `TURNSTILE-TEST.md` | æµ‹è¯•è¯´æ˜ï¼ˆ4å¤„ï¼‰ | âœ… å·²æ›´æ–° |
| `TURNSTILE-SETUP.md` | é…ç½®æŒ‡å—ï¼ˆ5å¤„ï¼‰ | âœ… å·²æ›´æ–° |
| `check-turnstile.sh` | æ£€æŸ¥è„šæœ¬ï¼ˆ3å¤„ï¼‰ | âœ… å·²æ›´æ–° |
| `update-sitekey.sh` | æ›´æ–°è„šæœ¬ï¼ˆ2å¤„ï¼‰ | âœ… å·²æ›´æ–° |

**æ€»è®¡**: 7 ä¸ªæ–‡ä»¶ï¼Œ23 å¤„æ›´æ–°

---

## ğŸš€ éƒ¨ç½²çŠ¶æ€

- âœ… **ä»£ç å·²æ›´æ–°**
- âœ… **å·²éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ**
  - Worker Version: `bdbee220-f5c0-4edb-baf0-12aecc95e24e`
  - éƒ¨ç½²åœ°å€: https://imageaigo.cc
- âœ… **å·²æ¨é€åˆ° GitHub**
  - Commit: `9c9bbad`

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

ç°åœ¨è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æµ‹è¯• Turnstile åŠŸèƒ½ï¼š

### 1. è®¿é—®ç™»å½•é¡µé¢
```
https://imageaigo.cc/login
```

### 2. è§¦å‘ Turnstile
- è¾“å…¥**ä»»æ„é‚®ç®±/ç”¨æˆ·å**
- è¾“å…¥**é”™è¯¯å¯†ç **
- ç‚¹å‡» **Login**
- **é‡å¤ä¸Šè¿°æ­¥éª¤**ï¼ˆç¬¬ 2 æ¬¡å¤±è´¥ï¼‰

### 3. éªŒè¯ Widget æ˜¾ç¤º
åº”è¯¥çœ‹åˆ°ï¼š
```
ğŸ›¡ï¸ Human Verification Required
[Cloudflare Turnstile Widget]
```

### 4. å®ŒæˆéªŒè¯
- Turnstile ä¼šè‡ªåŠ¨éªŒè¯ï¼ˆæˆ–éœ€è¦ç®€å•äº¤äº’ï¼‰
- è¾“å…¥**æ­£ç¡®çš„ç”¨æˆ·å/å¯†ç **
- ç‚¹å‡» **Login**
- **åº”è¯¥æˆåŠŸç™»å½•** âœ…

---

## ğŸ” éªŒè¯é…ç½®

### æ–¹æ³• 1: ä½¿ç”¨æ£€æŸ¥è„šæœ¬
```bash
./check-turnstile.sh
```

åº”è¯¥æ˜¾ç¤ºï¼š
```
âœ… Site Key found in frontend
   Site Key: 0x4AAAAAAACxIrRaibzD1pfM
âœ… Turnstile script included
âœ… TURNSTILE_SECRET_KEY is configured
âœ… Backend verification code exists
```

### æ–¹æ³• 2: æµè§ˆå™¨å¼€å‘è€…å·¥å…·
1. è®¿é—® https://imageaigo.cc/login
2. æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)
3. åˆ‡æ¢åˆ° **Console** æ ‡ç­¾
4. è§¦å‘ Turnstileï¼ˆå¤±è´¥ 2 æ¬¡ï¼‰
5. æ£€æŸ¥æ˜¯å¦æœ‰æ¸²æŸ“é”™è¯¯

åº”è¯¥çœ‹åˆ° Turnstile widget æ­£å¸¸åŠ è½½ï¼Œæ—  "Invalid site key" é”™è¯¯ã€‚

### æ–¹æ³• 3: æŸ¥çœ‹åç«¯æ—¥å¿—
```bash
wrangler tail
```

ç™»å½•æ—¶åº”è¯¥çœ‹åˆ°ï¼š
```
[Turnstile] Verification successful
```

---

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### å‰ç«¯é…ç½®
```javascript
// src/user-pages.js ç¬¬ 381 è¡Œ
const newWidgetId = turnstile.render('#' + elementId, {
  sitekey: '0x4AAAAAAACxIrRaibzD1pfM',  // âœ… å·²æ›´æ–°
  theme: 'light'
});
```

### åç«¯é…ç½®
```bash
# Cloudflare Workers Secret
TURNSTILE_SECRET_KEY = [ä½ çš„å¯†é’¥]  # âœ… å·²é…ç½®
```

### éªŒè¯æµç¨‹
```
1. ç”¨æˆ·ç™»å½•å¤±è´¥ 2 æ¬¡
   â†“
2. å‰ç«¯æ˜¾ç¤º Turnstile widgetï¼ˆä½¿ç”¨ç«™ç‚¹å¯†é’¥ï¼‰
   â†“
3. ç”¨æˆ·å®ŒæˆéªŒè¯
   â†“
4. å‰ç«¯è·å– token
   â†“
5. å‘é€åˆ°åç«¯ /api/auth/login
   â†“
6. åç«¯éªŒè¯ tokenï¼ˆä½¿ç”¨å¯†é’¥ï¼‰
   â†“
7. éªŒè¯æˆåŠŸï¼Œå…è®¸ç™»å½•
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç«™ç‚¹å¯†é’¥ä¸å¯†é’¥å¿…é¡»åŒ¹é…
ç¡®ä¿ï¼š
1. **å‰ç«¯çš„ç«™ç‚¹å¯†é’¥**: `0x4AAAAAAACxIrRaibzD1pfM`
2. **åç«¯çš„å¯†é’¥**: å¯¹åº”è¿™ä¸ªç«™ç‚¹çš„ Secret Key
3. **ä¸¤è€…å¿…é¡»æ¥è‡ªåŒä¸€ä¸ª Turnstile ç«™ç‚¹**

### å¦‚ä½•ç¡®è®¤åŒ¹é…ï¼Ÿ
1. ç™»å½• Cloudflare Dashboard
2. è®¿é—® Turnstile ç®¡ç†é¡µé¢
3. æ‰¾åˆ°ä½ çš„ç«™ç‚¹
4. ç¡®è®¤ï¼š
   - Site Key = `0x4AAAAAAACxIrRaibzD1pfM` âœ…
   - Secret Key = å·²é…ç½®åœ¨ Workers ä¸­ âœ…

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: "Invalid site key" é”™è¯¯
**åŸå› **: ç«™ç‚¹å¯†é’¥ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ Cloudflare Turnstile Dashboard
2. ç¡®è®¤ç«™ç‚¹å¯†é’¥æ˜¯å¦æ­£ç¡®
3. å¦‚éœ€æ›´æ¢ï¼Œè¿è¡Œ: `./update-sitekey.sh`

### é—®é¢˜ 2: Widget ä¸æ˜¾ç¤º
**å¯èƒ½åŸå› **:
- Turnstile è„šæœ¬è¢«å±è”½
- ç«™ç‚¹å¯†é’¥æ— æ•ˆ
- JavaScript é”™è¯¯

**æ£€æŸ¥æ­¥éª¤**:
1. æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯
2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚ï¼ˆchallenges.cloudflare.comï¼‰
3. ç¡®è®¤å¤±è´¥æ¬¡æ•°æ˜¯å¦è¾¾åˆ° 2 æ¬¡

### é—®é¢˜ 3: éªŒè¯å®Œæˆä½†ç™»å½•å¤±è´¥
**åŸå› **: åç«¯ Secret Key ä¸åŒ¹é…

**è§£å†³**:
```bash
# é‡æ–°é…ç½® Secret Key
wrangler secret put TURNSTILE_SECRET_KEY
# è¾“å…¥æ­£ç¡®çš„å¯†é’¥

# é‡æ–°éƒ¨ç½²
wrangler deploy
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `TURNSTILE-KEYS-CN.md` - å¯†é’¥é…ç½®å®Œæ•´è¯´æ˜
- `TURNSTILE-FIX-CN.md` - Turnstile ä¿®å¤è¯´æ˜
- `TURNSTILE-TEST.md` - è¯¦ç»†æµ‹è¯•æŒ‡å—
- `TURNSTILE-SETUP.md` - é…ç½®æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰

---

## âœ… ä¸‹ä¸€æ­¥

1. **æµ‹è¯•åŠŸèƒ½** - è®¿é—® https://imageaigo.cc/login æµ‹è¯•
2. **ç¡®è®¤å·¥ä½œ** - éªŒè¯ Turnstile æ­£å¸¸æ˜¾ç¤ºå’ŒéªŒè¯
3. **æŠ¥å‘Šé—®é¢˜** - å¦‚æœ‰ä»»ä½•é—®é¢˜è¯·åé¦ˆ

---

**æ›´æ–°å®Œæˆæ—¶é—´**: 2025-10-21  
**éƒ¨ç½²ç‰ˆæœ¬**: bdbee220-f5c0-4edb-baf0-12aecc95e24e  
**çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æµ‹è¯•**: â³ ç­‰å¾…ç”¨æˆ·ç¡®è®¤

