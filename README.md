# ğŸ¨ ImageAI Go

åŸºäº Cloudflare Workers çš„ AI å›¾ç‰‡åˆ†æä¸ç®¡ç†å¹³å°ï¼Œé‡‡ç”¨ç€‘å¸ƒæµå¸ƒå±€å±•ç¤ºï¼Œæ”¯æŒæ™ºèƒ½æ ‡ç­¾ã€æè¿°ç”Ÿæˆå’Œå›¾ç‰‡ç®¡ç†ã€‚

[![éƒ¨ç½²çŠ¶æ€](https://img.shields.io/badge/deploy-active-brightgreen)](https://imageaigo.cc)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. AI å›¾ç‰‡åˆ†æ
- **æ™ºèƒ½æè¿°ç”Ÿæˆ**ï¼šä½¿ç”¨ Llama 3.2 11B Vision æ¨¡å‹ç”Ÿæˆç®€æ´çš„å›¾ç‰‡æè¿°ï¼ˆ~50å­—ç¬¦ï¼‰â­
- **å±‚çº§åŒ–æ ‡ç­¾ç³»ç»Ÿ**ï¼šè‡ªåŠ¨ç”Ÿæˆä¸»åˆ†ç±»ã€å­åˆ†ç±»å’Œå±æ€§æ ‡ç­¾ï¼Œä¾¿äºæ£€ç´¢å’Œåˆ†ç±»
- **å›¾ç‰‡å°ºå¯¸æå–**ï¼šè‡ªåŠ¨è¯†åˆ« JPEG/PNG/GIF/WebP æ ¼å¼å¹¶æå–å®½é«˜ä¿¡æ¯
- **æ™ºèƒ½å‹ç¼©**ï¼šä¸Šä¼ å›¾ç‰‡è‡ªåŠ¨å‹ç¼©è‡³ 256px é•¿è¾¹ç”¨äº AI åˆ†æ â­
- **å»é‡åŠŸèƒ½**ï¼šåŸºäºå›¾ç‰‡å“ˆå¸Œè‡ªåŠ¨æ£€æµ‹é‡å¤å›¾ç‰‡ï¼Œè‡ªåŠ¨è·³è½¬åˆ°å·²å­˜åœ¨å›¾ç‰‡
- **é˜²æ»¥ç”¨ä¿æŠ¤**ï¼šIP é€Ÿç‡é™åˆ¶ï¼ˆ10æ¬¡/å°æ—¶ï¼‰ã€æœºå™¨äººæ£€æµ‹ã€è¡Œä¸ºåˆ†æ

### 2. ç€‘å¸ƒæµå±•ç¤º
- **å“åº”å¼å¸ƒå±€**ï¼šPC ç«¯è‡ªåŠ¨ 4-8 åˆ—ï¼Œæ‰‹æœºç«¯ 2 åˆ—ï¼Œå®Œå…¨è‡ªé€‚åº”å±å¹•å®½åº¦
- **ä¿æŒå®½é«˜æ¯”**ï¼šå›¾ç‰‡æŒ‰åŸå§‹å®½é«˜æ¯”æ˜¾ç¤ºï¼Œæ— è£å‰ªå˜å½¢
- **æµç•…åŠ è½½**ï¼šCSS columns å®ç°çš„çœŸæ­£ç€‘å¸ƒæµï¼Œæ€§èƒ½ä¼˜å¼‚
- **å¹³æ»‘åŠ¨ç”»**ï¼šæ‚¬åœæ•ˆæœå’Œè¿‡æ¸¡åŠ¨ç”»æå‡ç”¨æˆ·ä½“éªŒ

### 3. æœç´¢ä¸åˆ†ç±»
- **å…¨æ–‡æœç´¢**ï¼šæ”¯æŒæè¿°å’Œæ ‡ç­¾çš„æ¨¡ç³Šæœç´¢
- **æ ‡ç­¾ç­›é€‰**ï¼šæŒ‰ä¸»åˆ†ç±»ã€å­åˆ†ç±»å’Œå±æ€§æ ‡ç­¾æµè§ˆ
- **åˆ†ç±»æµè§ˆ**ï¼šè‡ªåŠ¨ç»Ÿè®¡å„åˆ†ç±»å›¾ç‰‡æ•°é‡
- **ç‚¹èµåŠŸèƒ½**ï¼šç”¨æˆ·å¯ä»¥ç‚¹èµå–œæ¬¢çš„å›¾ç‰‡

### 4. ç®¡ç†åå° â­ï¸ æ–°å¢
- **ç™»å½•è®¤è¯**ï¼šåŸºäº Token çš„å®‰å…¨è®¤è¯ç³»ç»Ÿ
- **æ•°æ®ç»Ÿè®¡**ï¼šå®æ—¶æ˜¾ç¤ºå›¾ç‰‡ã€æ ‡ç­¾ã€ç‚¹èµå’Œä¸Šä¼ ç»Ÿè®¡
- **å›¾ç‰‡ç®¡ç†**ï¼šæŸ¥çœ‹ã€æœç´¢ã€åˆ é™¤å›¾ç‰‡ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- **æ ‡ç­¾ç®¡ç†**ï¼šç®¡ç†æ ‡ç­¾ï¼ŒæŸ¥çœ‹ä½¿ç”¨æ¬¡æ•°ï¼Œæ¸…ç†æ— ç”¨æ ‡ç­¾
- **ç³»ç»Ÿç®¡ç†**ï¼šæ¸…ç©º R2 å­˜å‚¨ã€KV ç¼“å­˜æˆ–æ‰€æœ‰æ•°æ®
- **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒPCå’Œç§»åŠ¨ç«¯è®¿é—®
- **å®‰å…¨ä¿æŠ¤**ï¼šToken 24å°æ—¶è¿‡æœŸï¼Œç¯å¢ƒå˜é‡å­˜å‚¨å¯†ç 

### 5. æ€§èƒ½ä¸å®‰å…¨
- **å¤šçº§ç¼“å­˜**ï¼šKV ç¼“å­˜ + å›¾ç‰‡å“ˆå¸Œç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢ï¼ˆå“åº”æ—¶é—´é™ä½ 80%ï¼‰â­
- **æ™ºèƒ½å‹ç¼©**ï¼šä¸Šä¼ æ—¶è‡ªåŠ¨å‹ç¼©å›¾ç‰‡ç”¨äº AI åˆ†æï¼ŒåŸå›¾å­˜å‚¨åˆ° R2
- **é˜²ç›—é“¾ä¿æŠ¤**ï¼šR2 å›¾ç‰‡èµ„æºé˜²ç›—é“¾ï¼Œä»…å…è®¸æœ¬ç«™è®¿é—®
- **é€Ÿç‡é™åˆ¶**ï¼šæ¯ IP æ¯å°æ—¶ 10 æ¬¡ä¸Šä¼ é™åˆ¶ â­
- **é˜²æ»¥ç”¨**ï¼šæœºå™¨äººæ£€æµ‹ã€è¡Œä¸ºåˆ†æã€å¯ç–‘æ´»åŠ¨æ—¥å¿— â­
- **SEO ä¼˜åŒ–**ï¼šé™æ€é¡µé¢ç”Ÿæˆã€Open Graph æ ‡ç­¾ã€ç»“æ„åŒ–æ•°æ®

## ğŸš€ æŠ€æœ¯æ ˆ

- **è¿è¡Œç¯å¢ƒ**ï¼šCloudflare Workers (Edge Runtime)
- **æ•°æ®åº“**ï¼šD1 (SQLite)
- **å­˜å‚¨**ï¼šR2 (å…¼å®¹ S3)
- **ç¼“å­˜**ï¼šKV (é”®å€¼å­˜å‚¨)
- **AI æ¨¡å‹**ï¼šLlama 3.2 11B Vision Instruct
- **å‰ç«¯**ï¼šåŸç”Ÿ JavaScript + CSS (æ— æ¡†æ¶ä¾èµ–)

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### 1. å‰ç½®è¦æ±‚

```bash
# å®‰è£… Node.js 18+
node -v  # >= 18.0.0

# å®‰è£… Wrangler CLI
npm install -g wrangler

# ç™»å½• Cloudflare è´¦å·
wrangler login
```

### 2. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/imageaigo.git
cd imageaigo
npm install
```

### 3. åˆ›å»ºèµ„æº

```bash
# åˆ›å»º D1 æ•°æ®åº“
wrangler d1 create imageaigo

# åˆ›å»º R2 å­˜å‚¨æ¡¶
wrangler r2 bucket create imageaigo

# åˆ›å»º KV å‘½åç©ºé—´
wrangler kv:namespace create "CACHE"
```

### 4. é…ç½® wrangler.toml

æ›´æ–° `wrangler.toml` ä¸­çš„èµ„æº IDï¼š

```toml
name = "imageaigo"
main = "src/index.js"
compatibility_date = "2024-01-01"

[[d1_databases]]
binding = "DB"
database_name = "imageaigo"
database_id = "YOUR_D1_DATABASE_ID"  # æ›¿æ¢ä¸ºå®é™… ID

[[kv_namespaces]]
binding = "CACHE"
id = "YOUR_KV_NAMESPACE_ID"  # æ›¿æ¢ä¸ºå®é™… ID

[ai]
binding = "AI"

[[r2_buckets]]
binding = "R2"
bucket_name = "imageaigo"
```

### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åœ¨è¿œç¨‹æ•°æ®åº“æ‰§è¡Œ schema
wrangler d1 execute imageaigo --remote --file=schema.sql
```

### 6. éƒ¨ç½²

```bash
# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
npm run deploy

# æˆ–æœ¬åœ°å¼€å‘
npm run dev
```

## ğŸ“Š é¡¹ç›®ç»“æ„

```
imageaigo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js           # ä¸»å…¥å£æ–‡ä»¶ï¼Œè·¯ç”±å’Œä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ admin.js           # ç®¡ç†åå°é¡µé¢æ„å»º
â”‚   â”œâ”€â”€ analyzer.js        # AI åˆ†æå’Œå›¾ç‰‡å°ºå¯¸æå–
â”‚   â”œâ”€â”€ html-builder.js    # HTML é¡µé¢æ„å»º
â”‚   â”œâ”€â”€ footer-template.js # Footer ç»Ÿä¸€æ¨¡æ¿
â”‚   â”œâ”€â”€ recommendations.js # æ¨èç®—æ³•
â”‚   â”œâ”€â”€ slug-generator.js  # URL å‹å¥½çš„ slug ç”Ÿæˆ
â”‚   â”œâ”€â”€ styles.js          # CSS æ ·å¼
â”‚   â”œâ”€â”€ pages.js           # é™æ€é¡µé¢å†…å®¹
â”‚   â”œâ”€â”€ templates.js       # HTML æ¨¡æ¿
â”‚   â””â”€â”€ utils.js           # å·¥å…·å‡½æ•°
â”œâ”€â”€ schema.sql             # æ•°æ®åº“ç»“æ„
â”œâ”€â”€ wrangler.toml          # Cloudflare Workers é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ cleanup.sh             # æ•°æ®æ¸…ç†è„šæœ¬
â”œâ”€â”€ setup-admin.sh         # ç®¡ç†åå°å¿«é€Ÿè®¾ç½®
â”œâ”€â”€ change-admin-password.sh # å¯†ç ä¿®æ”¹å·¥å…·
â”œâ”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ CHANGELOG.md           # æ›´æ–°æ—¥å¿—
â””â”€â”€ LICENSE                # å¼€æºåè®®
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### ä¸Šä¼ å›¾ç‰‡

1. è®¿é—®ç½‘ç«™é¦–é¡µ
2. æ‹–æ‹½å›¾ç‰‡æˆ–ç‚¹å‡»ä¸Šä¼ åŒºåŸŸé€‰æ‹©æ–‡ä»¶
3. ç­‰å¾… AI åˆ†æï¼ˆ10-30 ç§’ï¼‰
4. å›¾ç‰‡ä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨ç€‘å¸ƒæµä¸­

### æœç´¢å›¾ç‰‡

```
# æœç´¢é¡µé¢
/search?q=å…³é”®è¯

# æŒ‰æ ‡ç­¾æµè§ˆ
/tag/Nature

# æŒ‰åˆ†ç±»æµè§ˆ
/category/Landscape
```

### ç®¡ç†åå°

#### å¿«é€Ÿè®¾ç½®

```bash
# 1. è®¾ç½®ç®¡ç†å‘˜å¯†ç 
wrangler secret put ADMIN_PASSWORD
wrangler secret put ADMIN_SECRET

# 2. éƒ¨ç½²
wrangler deploy

# 3. è®¿é—®åå°
# https://your-domain.com/admin/login
```

#### åŠŸèƒ½

- **æ•°æ®ç»Ÿè®¡**ï¼šå›¾ç‰‡ã€æ ‡ç­¾ã€ç‚¹èµæ•°é‡ç»Ÿè®¡
- **å›¾ç‰‡ç®¡ç†**ï¼šæµè§ˆã€æœç´¢ã€åˆ é™¤å›¾ç‰‡
- **æ‰¹é‡ä¸Šä¼ **ï¼šä¸€æ¬¡ä¸Šä¼ æœ€å¤š 10 å¼ å›¾ç‰‡ï¼ˆå¼‚æ­¥å¤„ç†ï¼‰â­ æ–°å¢
- **æ ‡ç­¾ç®¡ç†**ï¼šç®¡ç†æ ‡ç­¾ï¼ŒæŸ¥çœ‹ä½¿ç”¨æ¬¡æ•°
- **ç³»ç»Ÿæ¸…ç†**ï¼šæ¸…ç©º R2 å­˜å‚¨ã€KV ç¼“å­˜

#### é»˜è®¤å¯†ç 

âš ï¸ å¦‚æœªè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤å¯†ç ä¸º `admin123`ï¼ˆ**ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼**ï¼‰

### API æ¥å£

#### å…¬å¼€æ¥å£

```bash
# ä¸Šä¼ å¹¶åˆ†æå›¾ç‰‡
POST /api/analyze
Content-Type: multipart/form-data
Body: { original: File, compressed: File }

# è·å–å›¾ç‰‡åˆ—è¡¨
GET /api/images?limit=20&page=1

# è·å–å•å¼ å›¾ç‰‡è¯¦æƒ…
GET /api/image?id=123

# æœç´¢å›¾ç‰‡
GET /api/search?q=å…³é”®è¯

# è·å–åˆ†ç±»åˆ—è¡¨
GET /api/categories

# ç‚¹èµ/å–æ¶ˆç‚¹èµ
POST /api/like { imageId: 123 }
POST /api/unlike { imageId: 123 }

# æ•°æ®æ¸…ç†ï¼ˆéœ€è¦å¯†é’¥ï¼‰
POST /api/cleanup
Body: { action: "all", secret: "YOUR_SECRET" }
```

#### ç®¡ç†åå°æ¥å£ â­ï¸ æ–°å¢

æ‰€æœ‰ç®¡ç†æ¥å£éƒ½éœ€è¦åœ¨ Header ä¸­æºå¸¦ Tokenï¼š
```
Authorization: Bearer <token>
```

```bash
# ç®¡ç†å‘˜ç™»å½•
POST /api/admin/login
Body: { "password": "your_password" }

# è·å–ç»Ÿè®¡æ•°æ®
GET /api/admin/stats

# è·å–å›¾ç‰‡åˆ—è¡¨
GET /api/admin/images?page=1&limit=20&search=keyword

# è·å–å›¾ç‰‡è¯¦æƒ…
GET /api/admin/image/{id}

# åˆ é™¤å›¾ç‰‡
DELETE /api/admin/image/{id}

# è·å–æ ‡ç­¾åˆ—è¡¨
GET /api/admin/tags?search=keyword

# åˆ é™¤æ ‡ç­¾
DELETE /api/admin/tag/{id}

# æ‰¹é‡ä¸Šä¼ ï¼ˆå¼‚æ­¥å¤„ç†ï¼‰â­ æ–°å¢
POST /api/admin/batch-upload
Content-Type: multipart/form-data
Body: file_0, file_1, file_2, ... (æœ€å¤š10ä¸ª)

# è·å–å›¾ç‰‡ JSON æ•°æ®ï¼ˆä»…æè¿°å’Œæ ‡ç­¾ï¼‰â­ æ–°å¢
GET /api/image-json/{slug}
è¿”å›ï¼š{ "description": "...", "tags": {...} }
```

## âš™ï¸ é…ç½®é€‰é¡¹

### ç¯å¢ƒå˜é‡ â­ï¸ æ›´æ–°

æ¨èä½¿ç”¨ `wrangler secret` å‘½ä»¤è®¾ç½®æ•æ„Ÿä¿¡æ¯ï¼š

```bash
# ç®¡ç†å‘˜å¯†ç ï¼ˆå¿…éœ€ï¼‰
wrangler secret put ADMIN_PASSWORD

# Token ç­¾åå¯†é’¥ï¼ˆå¿…éœ€ï¼‰
wrangler secret put ADMIN_SECRET
```

æˆ–åœ¨ Dashboard ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…éœ€ |
|--------|------|--------|------|
| `ADMIN_PASSWORD` | ç®¡ç†å‘˜ç™»å½•å¯†ç  | `admin123` | **å¼ºçƒˆæ¨è** |
| `ADMIN_SECRET` | Token ç­¾åå¯†é’¥ | `default-secret-change-in-production` | **å¼ºçƒˆæ¨è** |

âš ï¸ **ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹é»˜è®¤å€¼ï¼**

### ç¼“å­˜ç­–ç•¥

- **å›¾ç‰‡ç¼“å­˜**ï¼šR2 å›¾ç‰‡ 1 å¹´ç¼“å­˜
- **KV ç¼“å­˜**ï¼šåˆ†æç»“æœç¼“å­˜ 24 å°æ—¶
- **HTML ç¼“å­˜**ï¼šé™æ€é¡µé¢ 5-10 åˆ†é’Ÿ

## ğŸ”§ ç»´æŠ¤

### ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 

```bash
# ä½¿ç”¨è„šæœ¬
./change-admin-password.sh

# æˆ–æ‰‹åŠ¨ä¿®æ”¹
wrangler secret put ADMIN_PASSWORD
wrangler secret put ADMIN_SECRET
wrangler deploy
```

### æ•°æ®æ¸…ç†

åœ¨ç®¡ç†åå° â†’ ç³»ç»Ÿç®¡ç† â†’ é€‰æ‹©æ¸…ç†é€‰é¡¹

æˆ–ä½¿ç”¨ APIï¼š
```bash
curl -X POST https://your-domain/api/cleanup \
  -H "Content-Type: application/json" \
  -d '{"action": "all", "secret": "cleanup-imageaigo-2024"}'
```

### ç›‘æ§æ—¥å¿—

```bash
wrangler tail
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–

- âœ… å›¾ç‰‡å‹ç¼©ï¼šä¸Šä¼ æ—¶è‡ªåŠ¨å‹ç¼©åˆ°åˆé€‚å¤§å°
- âœ… KV ç¼“å­˜ï¼šç¼“å­˜ AI åˆ†æç»“æœï¼Œé¿å…é‡å¤åˆ†æ
- âœ… å›¾ç‰‡å»é‡ï¼šåŸºäºå“ˆå¸Œå€¼é¿å…é‡å¤å­˜å‚¨
- âœ… æ‡’åŠ è½½ï¼šå›¾ç‰‡æŒ‰éœ€åŠ è½½ï¼Œæå‡é¦–å±é€Ÿåº¦
- âœ… é˜²ç›—é“¾ï¼šR2 èµ„æºè®¿é—®æ§åˆ¶
- âœ… ç€‘å¸ƒæµä¼˜åŒ–ï¼šCSS columns åŸç”Ÿå®ç°ï¼Œæ€§èƒ½ä¼˜å¼‚

### æ€§èƒ½æŒ‡æ ‡

- **é¦–å±åŠ è½½**ï¼š< 2s
- **å›¾ç‰‡ä¸Šä¼ **ï¼š10-30sï¼ˆå« AI åˆ†æï¼‰
- **æœç´¢å“åº”**ï¼š< 500ms
- **ç¼“å­˜å‘½ä¸­ç‡**ï¼š> 80%

## ğŸ› å¸¸è§é—®é¢˜

**å›¾ç‰‡ä¸Šä¼ å¤±è´¥**ï¼šæ£€æŸ¥æ ¼å¼ï¼ˆJPEG/PNG/GIF/WebPï¼‰å’Œå¤§å°ï¼ˆ<20MBï¼‰

**AI åˆ†æè¶…æ—¶**ï¼šAI è´Ÿè½½é«˜ï¼Œè¯·ç¨åé‡è¯•æˆ–å‹ç¼©å›¾ç‰‡

**ç®¡ç†åå°æ— æ³•ç™»å½•**ï¼šç¡®ä¿å·²è®¾ç½® `ADMIN_PASSWORD` å¹¶é‡æ–°éƒ¨ç½²

**æç¤ºé€Ÿç‡é™åˆ¶**ï¼šæ¯ IP æ¯å°æ—¶é™åˆ¶ 10 æ¬¡ä¸Šä¼ ï¼Œè¯·ç­‰å¾…æˆ–ä½¿ç”¨ç®¡ç†åå°æ‰¹é‡ä¸Šä¼  â­

**é‡å¤å›¾ç‰‡ä¸Šä¼ **ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶è·³è½¬åˆ°å·²å­˜åœ¨çš„å›¾ç‰‡ï¼Œæ— éœ€é‡å¤ä¸Šä¼  â­

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

å¼€å‘æµç¨‹ï¼šFork â†’ åˆ›å»ºåˆ†æ”¯ â†’ æäº¤æ›´æ”¹ â†’ PR

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ™ æŠ€æœ¯æ ˆ

- [Cloudflare Workers](https://workers.cloudflare.com/) - Edge è®¡ç®—
- [Llama 3.2 Vision](https://ai.meta.com/) - AI è§†è§‰æ¨¡å‹
- [D1 Database](https://developers.cloudflare.com/d1/) - SQLite
- [R2 Storage](https://developers.cloudflare.com/r2/) - å¯¹è±¡å­˜å‚¨

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ Starï¼
